<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plastic Surgery Diagnosis System</title>
    <link rel="stylesheet" href="resources/css/app.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full bg-white shadow-xl z-40 sidebar-transition" style="width: 280px;">
        <div class="p-6 border-b border-gray-200">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 11.172V5l-1-1z"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-gray-800">PlasticCare</h1>
                    <p class="text-sm text-gray-500">Diagnosis System</p>
                </div>
            </div>
        </div>

        <nav class="p-4">
            <ul class="space-y-2">
                <li>
                    <a href="#" class="sidebar-nav-item active flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="overview">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <span>Patient Overview</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="consultation">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span>Consultation</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="imaging">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <span>Imaging & Analysis</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="simulation">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <span>3D Simulation</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="treatment">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                        <span>Treatment Plan</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="history">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>Medical History</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="sidebar-nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors" data-section="reports">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span>Reports</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="ml-72 min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200 p-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <button id="sidebar-toggle" class="p-2 rounded-lg hover:bg-gray-100">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Plastic Surgery Diagnosis</h1>
                        <p class="text-gray-600">Professional consultation and treatment planning</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" data-modal-open="new-patient-modal">
                        New Patient
                    </button>
                    <div class="w-10 h-10 bg-gray-300 rounded-full"></div>
                </div>
            </div>
        </header>

        <!-- Patient Overview Section -->
        <section id="section-overview" class="main-section p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Patient Info Card -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-lg p-6 card-professional">
                        <div class="text-center mb-6">
                            <div class="w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                                <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <h3 id="patient-name" class="text-xl font-bold text-gray-800">Sarah Johnson</h3>
                            <p class="text-gray-600">Age: <span id="patient-age">28</span></p>
                        </div>

                        <div class="space-y-4">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Consultation Date:</span>
                                <span id="consultation-date" class="font-medium">2024-01-15</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Status:</span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">Active</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Next Appointment:</span>
                                <span class="font-medium">2024-02-01</span>
                            </div>
                        </div>

                        <button class="w-full mt-6 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors" data-modal-open="edit-patient-modal">
                            Edit Patient Info
                        </button>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="lg:col-span-2">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-white rounded-xl shadow-lg p-6 card-professional">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Total Consultations</p>
                                    <p class="text-2xl font-bold text-blue-600">3</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-lg p-6 card-professional">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Procedures Planned</p>
                                    <p class="text-2xl font-bold text-green-600">2</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-lg p-6 card-professional">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-600 text-sm">Images Captured</p>
                                    <p class="text-2xl font-bold text-purple-600">12</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white rounded-xl shadow-lg p-6 card-professional">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Recent Activity</h3>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">New photos uploaded</p>
                                    <p class="text-sm text-gray-600">2 hours ago</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Consultation completed</p>
                                    <p class="text-sm text-gray-600">1 day ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Consultation Section -->
        <section id="section-consultation" class="main-section hidden p-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Consultation Management</h2>
                
                <!-- Tab Navigation -->
                <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
                    <button class="tab-transition px-4 py-2 rounded-md bg-blue-600 text-white" data-tab="consultation-notes">
                        Consultation Notes
                    </button>
                    <button class="tab-transition px-4 py-2 rounded-md bg-gray-100 text-gray-600" data-tab="assessment">
                        Assessment
                    </button>
                    <button class="tab-transition px-4 py-2 rounded-md bg-gray-100 text-gray-600" data-tab="recommendations">
                        Recommendations
                    </button>
                </div>

                <!-- Tab Content -->
                <div data-tab-content="consultation-notes">
                    <form class="dynamic-form space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Chief Complaint</label>
                                <textarea name="chief_complaint" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Patient's primary concern..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Medical History</label>
                                <textarea name="medical_history" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Relevant medical history..."></textarea>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Physical Examination</label>
                            <textarea name="physical_exam" rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Detailed physical examination findings..."></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Procedures Discussed</label>
                            <div class="dynamic-fields space-y-2">
                                <div class="flex items-center gap-2">
                                    <input type="text" name="procedures[]" class="flex-1 border border-gray-300 rounded-md px-3 py-2" placeholder="Enter procedure...">
                                </div>
                            </div>
                            <button type="button" class="mt-2 text-blue-600 hover:text-blue-700 text-sm" data-add-field="procedure">
                                + Add Procedure
                            </button>
                        </div>

                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Save Consultation Notes
                        </button>
                    </form>
                </div>

                <div data-tab-content="assessment" class="hidden">
                    <form class="dynamic-form space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Facial Symmetry</label>
                                <select name="facial_symmetry" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                    <option value="excellent">Excellent</option>
                                    <option value="good">Good</option>
                                    <option value="fair">Fair</option>
                                    <option value="poor">Poor</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Skin Quality</label>
                                <select name="skin_quality" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                    <option value="excellent">Excellent</option>
                                    <option value="good">Good</option>
                                    <option value="fair">Fair</option>
                                    <option value="poor">Poor</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Measurements</label>
                            <div class="dynamic-fields space-y-2">
                                <div class="grid grid-cols-3 gap-2">
                                    <input type="text" name="measurement_names[]" class="border border-gray-300 rounded-md px-3 py-2" placeholder="Measurement">
                                    <input type="number" name="measurement_values[]" class="border border-gray-300 rounded-md px-3 py-2" placeholder="Value">
                                    <input type="text" name="measurement_units[]" class="border border-gray-300 rounded-md px-3 py-2" placeholder="Unit">
                                </div>
                            </div>
                            <button type="button" class="mt-2 text-blue-600 hover:text-blue-700 text-sm" data-add-field="measurement">
                                + Add Measurement
                            </button>
                        </div>

                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Save Assessment
                        </button>
                    </form>
                </div>

                <div data-tab-content="recommendations" class="hidden">
                    <form class="dynamic-form space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Treatment Recommendations</label>
                            <textarea name="treatment_recommendations" rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Detailed treatment recommendations..."></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Alternative Options</label>
                            <textarea name="alternative_options" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Alternative treatment options..."></textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Estimated Cost</label>
                                <input type="number" name="estimated_cost" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="0.00">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Recovery Time</label>
                                <input type="text" name="recovery_time" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="e.g., 2-3 weeks">
                            </div>
                        </div>

                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Save Recommendations
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Imaging & Analysis Section -->
        <section id="section-imaging" class="main-section hidden p-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Image Viewer -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-gray-800">Image Analysis</h3>
                        <div class="flex gap-2">
                            <button class="annotation-tool p-2 rounded-lg border hover:bg-gray-50" title="Add Annotation">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                </svg>
                            </button>
                            <button class="measurement-tool p-2 rounded-lg border hover:bg-gray-50" title="Measure">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21l3-3-3-3m8 6l3-3-3-3M4 4h16v16H4z"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="image-viewer relative bg-gray-100 rounded-lg overflow-hidden" style="height: 400px;">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=600" 
                             alt="Patient Photo" 
                             class="filtered-image w-full h-full object-cover">
                    </div>

                    <!-- Image Controls -->
                    <div class="mt-4 space-y-3">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Brightness</label>
                                <input type="range" class="filter-control w-full" data-filter="brightness" min="50" max="150" value="100">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Contrast</label>
                                <input type="range" class="filter-control w-full" data-filter="contrast" min="50" max="150" value="100">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Before/After Comparison -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Before/After Comparison</h3>
                    
                    <div class="comparison-slider relative" style="height: 400px;">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=600" 
                             alt="After" 
                             class="absolute inset-0 w-full h-full object-cover rounded-lg">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=600" 
                             alt="Before" 
                             class="before-image absolute inset-0 w-full h-full object-cover rounded-lg"
                             style="clip-path: inset(0 50% 0 0);">
                        <div class="comparison-handle" style="left: 50%;"></div>
                    </div>

                    <div class="mt-4 flex justify-between text-sm text-gray-600">
                        <span>Before</span>
                        <span>After</span>
                    </div>
                </div>
            </div>

            <!-- Image Gallery -->
            <div class="mt-6 bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Patient Images</h3>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        Upload Images
                    </button>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=200" 
                             alt="Patient Photo" 
                             class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=200" 
                             alt="Patient Photo" 
                             class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=200" 
                             alt="Patient Photo" 
                             class="w-full h-full object-cover">
                    </div>
                    <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity">
                        <img src="https://images.pexels.com/photos/3845457/pexels-photo-3845457.jpeg?auto=compress&cs=tinysrgb&w=200" 
                             alt="Patient Photo" 
                             class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </section>

        <!-- 3D Simulation Section -->
        <section id="section-simulation" class="main-section hidden p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- 3D Viewer -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-800">3D Facial Model</h3>
                            <div class="flex gap-2">
                                <button class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md text-sm">Reset View</button>
                                <button class="px-3 py-1 bg-green-100 text-green-700 rounded-md text-sm">Save Changes</button>
                            </div>
                        </div>
                        
                        <div id="viewer-3d" class="viewer-3d" style="height: 500px;"></div>
                    </div>
                </div>

                <!-- 3D Controls -->
                <div class="space-y-6">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Model Controls</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nose Size</label>
                                <input type="range" class="model-control w-full" data-control="nose-size" min="0.5" max="2" step="0.1" value="1">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nose Position</label>
                                <input type="range" class="model-control w-full" data-control="nose-position" min="0.5" max="1.5" step="0.1" value="1">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Eye Distance</label>
                                <input type="range" class="model-control w-full" data-control="eye-distance" min="0.8" max="1.2" step="0.05" value="1">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Face Width</label>
                                <input type="range" class="model-control w-full" data-control="face-width" min="0.8" max="1.2" step="0.05" value="1">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Face Height</label>
                                <input type="range" class="model-control w-full" data-control="face-height" min="0.8" max="1.2" step="0.05" value="1">
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Simulation Presets</h3>
                        
                        <div class="space-y-2">
                            <button class="w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors">
                                Rhinoplasty - Subtle
                            </button>
                            <button class="w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors">
                                Rhinoplasty - Dramatic
                            </button>
                            <button class="w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors">
                                Facial Contouring
                            </button>
                            <button class="w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors">
                                Lip Enhancement
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Treatment Plan Section -->
        <section id="section-treatment" class="main-section hidden p-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Treatment Plan</h2>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors" data-modal-open="new-treatment-modal">
                        Create New Plan
                    </button>
                </div>

                <!-- Treatment Timeline -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Treatment Timeline</h3>
                    <div class="relative">
                        <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-300"></div>
                        
                        <div class="space-y-6">
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">1</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-800">Initial Consultation</h4>
                                    <p class="text-gray-600 text-sm">Complete assessment and treatment planning</p>
                                    <p class="text-blue-600 text-sm font-medium">Completed - Jan 15, 2024</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white text-sm font-bold">2</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-800">Pre-operative Preparation</h4>
                                    <p class="text-gray-600 text-sm">Medical clearance and pre-op instructions</p>
                                    <p class="text-yellow-600 text-sm font-medium">In Progress - Due Jan 30, 2024</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold">3</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-800">Surgical Procedure</h4>
                                    <p class="text-gray-600 text-sm">Rhinoplasty procedure</p>
                                    <p class="text-gray-500 text-sm">Scheduled - Feb 15, 2024</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold">4</div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-800">Post-operative Care</h4>
                                    <p class="text-gray-600 text-sm">Recovery monitoring and follow-up</p>
                                    <p class="text-gray-500 text-sm">Planned - Feb 16 - Mar 15, 2024</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Treatment Details -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-3">Procedure Details</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Primary Procedure:</span>
                                <span class="font-medium">Rhinoplasty</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Technique:</span>
                                <span class="font-medium">Open Approach</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Duration:</span>
                                <span class="font-medium">2-3 hours</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Anesthesia:</span>
                                <span class="font-medium">General</span>
                            </div>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4">
                        <h4 class="font-semibold text-gray-800 mb-3">Cost Breakdown</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Surgeon Fee:</span>
                                <span class="font-medium">$8,500</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Facility Fee:</span>
                                <span class="font-medium">$2,000</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Anesthesia:</span>
                                <span class="font-medium">$1,200</span>
                            </div>
                            <div class="flex justify-between border-t pt-2 font-semibold">
                                <span>Total:</span>
                                <span class="text-green-600">$11,700</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Medical History Section -->
        <section id="section-history" class="main-section hidden p-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Medical History</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Previous Procedures</h3>
                        <div class="space-y-3">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-semibold text-gray-800">Botox Injections</h4>
                                    <span class="text-sm text-gray-500">2023-08-15</span>
                                </div>
                                <p class="text-gray-600 text-sm">Forehead and crow's feet treatment</p>
                                <p class="text-green-600 text-sm font-medium">Completed successfully</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="font-semibold text-gray-800">Dermal Fillers</h4>
                                    <span class="text-sm text-gray-500">2023-03-10</span>
                                </div>
                                <p class="text-gray-600 text-sm">Lip enhancement with hyaluronic acid</p>
                                <p class="text-green-600 text-sm font-medium">Completed successfully</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Medical Conditions</h3>
                        <div class="space-y-3">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800">Allergies</h4>
                                <div class="mt-2 flex flex-wrap gap-2">
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm">Penicillin</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm">Latex</span>
                                </div>
                            </div>
                            
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800">Current Medications</h4>
                                <ul class="mt-2 text-sm text-gray-600 space-y-1">
                                    <li>• Multivitamin (daily)</li>
                                    <li>• Birth control pill</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reports Section -->
        <section id="section-reports" class="main-section hidden p-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Reports & Documentation</h2>
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        Generate Report
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Consultation Report</h3>
                                <p class="text-sm text-gray-500">Jan 15, 2024</p>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Initial consultation findings and recommendations</p>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Photo Documentation</h3>
                                <p class="text-sm text-gray-500">Jan 15, 2024</p>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Before photos and analysis images</p>
                    </div>

                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Treatment Plan</h3>
                                <p class="text-sm text-gray-500">Jan 20, 2024</p>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm">Detailed treatment plan and timeline</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <!-- New Patient Modal -->
    <div id="new-patient-modal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden z-50 modal-backdrop">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">New Patient</h3>
                    <button data-modal-close class="text-gray-500 hover:text-gray-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <form class="dynamic-form space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" name="name" class="w-full border border-gray-300 rounded-md px-3 py-2" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Age</label>
                            <input type="number" name="age" class="w-full border border-gray-300 rounded-md px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                            <select name="gender" class="w-full border border-gray-300 rounded-md px-3 py-2" required>
                                <option value="">Select...</option>
                                <option value="female">Female</option>
                                <option value="male">Male</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                        <input type="tel" name="phone" class="w-full border border-gray-300 rounded-md px-3 py-2" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" name="email" class="w-full border border-gray-300 rounded-md px-3 py-2" required>
                    </div>
                    <div class="flex gap-2 pt-4">
                        <button type="submit" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            Create Patient
                        </button>
                        <button type="button" data-modal-close class="bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="resources/js/app.js"></script>
</body>
</html>